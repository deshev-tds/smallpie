<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <title>smallpie</title>
</head>

<body class="bg-bg text-text dark:bg-darkBg dark:text-darkText font-sans min-h-screen flex flex-col">

  <!-- HEADER -->
  <header class="py-6 border-b border-bgSubtle dark:border-darkBgSoft bg-bg dark:bg-darkSurface transition-colors">
    <div class="max-w-3xl mx-auto px-4 flex flex-col gap-4 md:gap-5">

      <!-- Brand + tagline + privacy -->
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">

        <!-- Logo + wordmark + tagline -->
        <div class="flex items-center gap-3 md:gap-4">
          <!-- LOGO -->
          <div class="h-11 w-11 md:h-12 md:w-12 flex items-center justify-center flex-shrink-0">
            <svg viewBox="0 0 100 100" class="h-11 w-11 md:h-12 md:w-12">
              <circle
                cx="50" cy="50" r="32"
                fill="none"
                stroke="#F5F5F5"
                stroke-width="8"
                stroke-linecap="round"
                stroke-dasharray="190 60"
                stroke-dashoffset="10"
              />
              <line
                x1="32" y1="50" x2="68" y2="50"
                stroke="#D1A32F"
                stroke-width="8"
                stroke-linecap="round"
              />
            </svg>
          </div>

          <div class="flex flex-col gap-1">
            <div class="text-2xl md:text-3xl font-semibold tracking-tight text-forest dark:text-darkText">
              smallpie
            </div>
            <p class="text-sm md:text-base text-textMuted dark:text-darkMuted">
              Turn your meetings into clear, structured notes.
            </p>
          </div>
        </div>

        <!-- Privacy badge 
        <div class="flex md:items-end">
          <span
            class="inline-flex items-center px-3.5 py-1.5 rounded-full
                   bg-darkBgSoft/80 border border-darkBgSoft
                   text-[11px] md:text-xs text-darkMuted
                   whitespace-nowrap">
            Processed securely. Never stored.
          </span>
        </div> -->

      </div>

    </div> 
  </header>

  <!-- BACKDROP (dismisses flow) -->
  <div id="backdrop"
       class="hidden fixed inset-0 bg-backdropDim transition-opacity"></div>

  <!-- MAIN CONTENT -->
  <main class="
    flex-1 max-w-3xl mx-auto w-full
    px-4 py-8 space-y-10
    md:py-10 md:space-y-12
    lg:py-12 lg:space-y-14
  ">

    <!-- HERO / ONBOARDING -->
    <section class="
      bg-white dark:bg-darkSurface
      border border-bgSubtle dark:border-darkBgSoft
      rounded-3xl shadow-sm
      p-6 md:p-7
      space-y-4
    ">
      <h2 class="text-xl md:text-2xl font-semibold text-forest dark:text-darkAccent">
        How smallpie works
      </h2>
      <p class="text-sm text-textMuted dark:text-darkMuted">
        Record live audio or upload a file. We transcribe the conversation and generate clean, readable notes for you.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mt-2">
        <div class="space-y-1">
          <div class="text-xs font-semibold uppercase tracking-wide text-textMuted dark:text-darkMuted">
            1. Capture
          </div>
          <p class="text-textMuted dark:text-darkMuted">
            Record your meeting or upload an existing recording.
          </p>
        </div>
        <div class="space-y-1">
          <div class="text-xs font-semibold uppercase tracking-wide text-textMuted dark:text-darkMuted">
            2. Understand
          </div>
          <p class="text-textMuted dark:text-darkMuted">
            smallpie transcribes and analyses the audio in real time.
          </p>
        </div>
        <div class="space-y-1">
          <div class="text-xs font-semibold uppercase tracking-wide text-textMuted dark:text-darkMuted">
            3. Deliver
          </div>
          <p class="text-textMuted dark:text-darkMuted">
            You get structured notes and key points that are easy to share.
          </p>
        </div>
      </div>
    </section>

    <!-- ACTION GRID -->
    <section id="action-grid"
      class="grid grid-cols-1 md:grid-cols-2 gap-6">

      <!-- CARD: RECORD -->
      <div class="
        bg-white dark:bg-darkSurface
        border border-bgSubtle dark:border-darkBgSoft
        rounded-3xl shadow-md
        p-6 md:p-8
        flex flex-col items-center text-center
      ">
        <h2 class="text-lg md:text-xl font-medium text-forest dark:text-darkAccent mb-2">
          Record live audio
        </h2>
        <p class="text-sm text-textMuted dark:text-darkMuted mb-5">
          Use your microphone to capture the meeting in real time.
        </p>

        <!-- REC BUTTON -->
        <button id="start-recording"
          class="
            h-28 w-28 md:h-32 md:w-32 
            rounded-full flex items-center justify-center
            bg-gold text-forestDark
            border-4 border-forest
            ring-4 ring-gold/30 ring-offset-2 ring-offset-bg dark:ring-offset-darkBg
            hover:ring-gold/50 active:scale-95 transition-all
          ">
          <span id="record-label" class="text-base font-semibold">REC</span>
        </button>

        <p id="record-helper"
           class="text-sm text-textMuted dark:text-darkMuted mt-4">
          Tap REC to start listening.
        </p>
        <p id="record-timer"
           class="text-xs text-textMuted dark:text-darkMuted mt-1 hidden">
          00:00 • Recording…
        </p>

        <p id="record-error"
           class="text-xs text-danger mt-2 hidden">
          We couldn’t access your microphone. Check permissions and try again.
        </p>
      </div>

      <!-- CARD: UPLOAD -->
      <div class="
        bg-white dark:bg-darkSurface
        border border-bgSubtle dark:border-darkBgSoft
        rounded-3xl shadow-md
        p-6 md:p-8
        flex flex-col justify-between
      ">
        <div class="text-center md:text-left space-y-2">
          <h2 class="text-lg md:text-xl font-medium text-forest dark:text-darkAccent">
            Upload a recording
          </h2>
          <p class="text-sm text-textMuted dark:text-darkMuted">
            Perfect if you already have a meeting recording on your device.
          </p>
        </div>

        <div class="mt-6">
          <button id="use-file"
            class="
              w-full py-4 rounded-xl 
              bg-gold text-forestDark 
              text-sm md:text-base font-medium shadow-sm hover:bg-goldSoft 
              active:scale-[0.98] transition
              dark:bg-darkSurface dark:text-darkAccent dark:hover:bg-darkBgSoft
            ">
            Choose or drop a file
          </button>
          <p class="text-xs text-textMuted dark:text-darkMuted mt-3 text-center md:text-left">
            Supports WAV, MP3, M4A (up to ~2 hours).
          </p>
        </div>
      </div>

    </section>

    <!-- FLOW CONTAINER (all dynamic UI goes here) -->
    <section id="flow-container" class="relative w-full"></section>

    <!-- FOOTER / PRIVACY STRIP -->
    <footer class="pb-6 pt-2 text-center text-xs text-textMuted dark:text-darkMuted">
      smallpie · v0.4 · Processed securely. Never stored.
    </footer>

  </main>

  <!-- TEMPLATES -->

  <!-- BOTTOM SHEET: MEETING DETAILS -->
  <template id="tmpl-form-section">
    <div
      class="
        fixed left-0 right-0 bottom-0
        bg-white dark:bg-darkSurface
        border-t border-bgSubtle dark:border-darkBgSoft
        rounded-t-3xl shadow-2xl
        p-6 space-y-6 max-w-3xl mx-auto
      ">
      <h3 class="text-lg font-semibold text-forest dark:text-darkAccent text-center">
        Tell us about this meeting
      </h3>
      <p class="text-xs text-textMuted dark:text-darkMuted text-center">
        This helps smallpie label your transcript and generate more useful notes.
      </p>

      <div class="space-y-5">
        <label class="block">
          <span class="text-sm font-medium text-forest dark:text-darkAccent">Meeting name</span>
          <input id="meeting-name" type="text" class="
            block w-full mt-2 rounded-lg 
            border border-bgSubtle dark:border-darkBgSoft
            bg-white dark:bg-darkSurface 
            text-text dark:text-darkText 
            p-3 focus:ring-2 focus:ring-gold dark:focus:ring-darkAccent
            focus:border-gold dark:focus:border-darkAccent
            focus:outline-none
          " placeholder="Weekly sync, 1:1, client call…" />
        </label>

        <label class="block">
          <span class="text-sm font-medium text-forest dark:text-darkAccent">Topic</span>
          <input id="meeting-topic" type="text" class="
            block w-full mt-2 rounded-lg 
            border border-bgSubtle dark:border-darkBgSoft
            bg-white dark:bg-darkSurface 
            text-text dark:text-darkText 
            p-3 focus:ring-2 focus:ring-gold dark:focus:ring-darkAccent
            focus:border-gold dark:focus:border-darkAccent
            focus:outline-none
          " placeholder="Q4 planning, incident review, roadmap…" />
        </label>

        <label class="block">
          <span class="text-sm font-medium text-forest dark:text-darkAccent">Participants</span>
          <input id="meeting-participants" type="number" class="
            block w-full mt-2 rounded-lg 
            border border-bgSubtle dark:border-darkBgSoft
            bg-white dark:bg-darkSurface 
            text-text dark:text-darkText 
            p-3 focus:ring-2 focus:ring-gold dark:focus:ring-darkAccent
            focus:border-gold dark:focus:border-darkAccent
            focus:outline-none
          " placeholder="Number of people in the meeting" />
        </label>
      </div>

      <button id="begin-flow"
        class="
          w-full py-4 rounded-xl 
          bg-forest text-white 
          text-lg font-medium shadow-sm hover:bg-forestDark 
          active:scale-[0.98] transition
          dark:bg-darkAccent dark:text-darkBg dark:hover:bg-gold
        ">
        Start recording
      </button>
    </div>
  </template>

  <!-- UPLOAD SECTION TEMPLATE (drag & drop + process) -->
  <template id="tmpl-file-upload-section">
    <div class="
      bg-white dark:bg-darkSurface
      border border-bgSubtle dark:border-darkBgSoft
      rounded-3xl shadow-sm
      p-6 space-y-6 mt-6
    ">

      <div id="upload-dropzone"
           class="
             border-2 border-dashed border-bgSubtle dark:border-darkBgSoft
             rounded-2xl p-6 text-center
             bg-bgSubtle/40 dark:bg-darkBgSoft/40
             cursor-pointer
             transition
           ">
        <p class="text-sm font-medium text-forest dark:text-darkAccent">
          Drop your file here
        </p>
        <p class="text-xs text-textMuted dark:text-darkMuted mt-1">
          …or click to browse from your device.
        </p>
      </div>

      <input id="audio-file" type="file"
        accept=".wav,.mp3,.m4a,.aac"
        class="block w-full mt-3 text-xs text-textMuted dark:text-darkMuted" />

      <button id="upload-file-btn"
        class="
          w-full py-3.5 rounded-xl 
          bg-forest text-white 
          text-sm md:text-base font-medium shadow-sm hover:bg-forestDark 
          active:scale-[0.98] transition
          dark:bg-darkAccent dark:text-darkBg dark:hover:bg-gold
        ">
        Start processing
      </button>

      <p class="text-xs text-textMuted dark:text-darkMuted">
        Your file will be processed securely. We don’t keep your audio longer than necessary.
      </p>
    </div>
  </template>

  <!-- STATUS TEMPLATE -->
  <template id="tmpl-status">
    <div class="
      bg-white dark:bg-darkSurface
      border border-bgSubtle dark:border-darkBgSoft
      rounded-3xl shadow-sm
      p-6 mt-6 text-center space-y-3
    ">
      <div class="flex flex-col items-center gap-3">
        <div class="h-8 w-8 rounded-full border-2 border-gold border-t-transparent animate-spin"></div>
        <div id="status-text"
             class="text-forest dark:text-darkAccent text-base font-medium">
          Processing…
        </div>
        <p id="status-subtext"
           class="text-xs text-textMuted dark:text-darkMuted">
          We’re analysing your audio and generating your notes.
        </p>
      </div>
    </div>
  </template>

  <script type="module" src="src/main.js"></script>
</body>
</html>
