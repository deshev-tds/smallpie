<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <title>smallpie - a quiet meeting recorder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind (built into /src/styles) -->
  <link rel="stylesheet" href="/src/styles/base.css" />

  <!-- Favicon / basic meta -->
  <meta name="description" content="smallpie turns your meetings into clear, structured notes." />
</head>
<body class="min-h-screen bg-bgSoft dark:bg-darkBg text-textPrimary dark:text-darkText antialiased">

  <div class="min-h-screen flex flex-col">
    <!-- HEADER -->
    <header class="w-full border-b border-bgSubtle dark:border-darkBgSoft bg-bgSoft/80 dark:bg-darkBg/80 backdrop-blur-sm">
      <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between gap-4">
        <div class="flex items-center gap-3">
          <!-- Logo -->
          <div class="flex items-center justify-center w-10 h-10 rounded-full bg-bgSubtle dark:bg-darkBgSoft">
            <svg
              width="32"
              height="32"
              viewBox="0 0 100 100"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle
                cx="50" cy="50" r="32"
                fill="none"
                stroke="#F5F5F5"
                stroke-width="8"
                stroke-linecap="round"
                stroke-dasharray="190 60"
                stroke-dashoffset="10"
              />
              <line
                x1="32"
                y1="50"
                x2="68"
                y2="50"
                stroke="#D1A32F"
                stroke-width="8"
                stroke-linecap="round"
              />
            </svg>
          </div>
          <div class="flex flex-col">
            <span class="text-sm font-semibold tracking-tight text-forest dark:text-darkAccent">
              smallpie
            </span>
            <span class="text-xs text-textMuted dark:text-darkMuted">
              Listens quetly. Gives summary.
            </span>
          </div>
        </div>

        <div class="flex items-center gap-3 text-xs text-textMuted dark:text-darkMuted">
          <span class="hidden sm:inline">Processed securely. Never stored.</span>
        </div>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-1">
      <div class="max-w-4xl mx-auto px-4 py-8 flex flex-col gap-6">

        <!-- HERO -->
        <section class="flex flex-col gap-3">
          <h1 class="text-2xl sm:text-3xl font-semibold text-forest dark:text-darkAccent tracking-tight">
            Turn your meetings into clear, structured notes and insights.
          </h1>
          <p class="text-sm sm:text-base text-textMuted dark:text-darkMuted max-w-2xl">
            smallpie records your meeting, analyzes it, and sends you clean, actionable notes and insights.
            No dashboards, no clutter, no "subscribe to our newsletter". Just one button and insights you can trust, delivered to your mail in minutes.
          </p>
        </section>

        <!-- CARDS ROW -->
        <section class="grid gap-4 md:grid-cols-[minmax(0,2fr)_minmax(0,1.4fr)] items-start">
          <!-- LEFT: Recording card -->
          <div class="rounded-3xl border border-bgSubtle dark:border-darkBgSoft bg-white dark:bg-darkSurface shadow-sm p-5 flex flex-col gap-4">
            <div class="flex items-center justify-between gap-2">
              <div class="flex flex-col gap-0.5">
                <span class="text-xs font-medium uppercase tracking-[0.12em] text-textMuted dark:text-darkMuted">Live capture</span>
                <span class="text-sm font-semibold text-forest dark:text-darkAccent">
                  Record a new meeting
                </span>
              </div>
              <div class="flex items-center gap-2 text-[11px] text-textMuted dark:text-darkMuted">
                <span class="inline-flex items-center gap-1 rounded-full bg-bgSubtle dark:bg-darkBgSoft px-2 py-1">
                  <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span>
                  Online
                </span>
              </div>
            </div>

            <div class="flex flex-col items-center justify-center gap-3 py-4">
              <button
                id="start-recording"
                class="w-16 h-16 rounded-full bg-rose-600 text-white flex items-center justify-center text-sm font-semibold shadow-sm hover:bg-rose-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500"
              >
                REC
              </button>
              <div class="flex flex-col items-center gap-1">
                <span id="record-label" class="text-sm font-medium text-forest dark:text-darkAccent">
                  REC
                </span>
                <span id="record-helper" class="text-xs text-textMuted dark:text-darkMuted">
                  Tap REC to start listening.
                </span>
              </div>
              <div id="record-timer" class="text-xs font-mono text-textMuted dark:text-darkMuted hidden">
                00:00
              </div>
              <div
                id="record-error"
                class="hidden text-xs text-rose-600 dark:text-rose-400 mt-1"
              >
                Something went wrong. Please try again.
              </div>
            </div>

            <p class="text-[11px] text-textMuted dark:text-darkMuted">
              smallpie only records while REC is active. Audio is processed securely on our side and not reused for training or advertising.
            </p>
          </div>

          <!-- RIGHT: Upload card -->
          <div class="rounded-3xl border border-bgSubtle dark:border-darkBgSoft bg-white dark:bg-darkSurface shadow-sm p-5 flex flex-col gap-4">
            <div class="flex items-center justify-between gap-2">
              <div class="flex flex-col gap-0.5">
                <span class="text-xs font-medium uppercase tracking-[0.12em] text-textMuted dark:text-darkMuted">
                  Existing audio
                </span>
                <span class="text-sm font-semibold text-forest dark:text-darkAccent">
                  Upload a recording
                </span>
              </div>
            </div>

            <p class="text-xs text-textMuted dark:text-darkMuted">
              Already recorded your meeting elsewhere? Upload the file and we’ll generate the same clear, structured notes.
            </p>

            <button
              id="use-file"
              class="inline-flex items-center justify-center px-3 py-2 rounded-full border border-bgSubtle dark:border-darkBgSoft text-xs font-medium text-forest dark:text-darkAccent bg-bgSoft dark:bg-darkBg hover:bg-bgSubtle dark:hover:bg-darkBgSoft transition-colors"
            >
              Upload audio file
            </button>

            <p class="text-[11px] text-textMuted dark:text-darkMuted mt-1">
              We support common formats like .webm, .m4a, .mp3, .wav and others.
            </p>
          </div>
        </section>

        <!-- FLOW AREA (modal-ish) -->
        <div id="backdrop" class="fixed inset-0 bg-black/30 dark:bg-black/50 hidden z-10"></div>
        <div
          id="flow-container"
          class="fixed inset-x-0 bottom-0 z-20 flex justify-center pointer-events-none"
        >
          <!-- Dynamic content from templates will be mounted here -->
        </div>
      </div>
    </main>

    <!-- FOOTER -->
    <footer class="border-t border-bgSubtle dark:border-darkBgSoft py-4 mt-4">
      <div class="max-w-4xl mx-auto px-4 flex flex-col sm:flex-row items-center justify-between gap-2">
        <p class="text-[11px] text-textMuted dark:text-darkMuted">
          smallpie runs with local transcription and a structured analysis layer.
        </p>
        <p class="text-[11px] text-textMuted dark:text-darkMuted">
          smallpie is an <a href="https://github.com/damyandeshev/smallpie" target="_blank" rel="noopener noreferrer">open-source project maintained by Damyan Deshev</a>. We don’t keep your audio longer than necessary.
        </p>
      </div>
    </footer>
  </div>

  <!-- FORM TEMPLATE -->
  <template id="tmpl-form-section">
    <div
      class="pointer-events-auto max-w-md w-full mx-4 mb-6 rounded-3xl border border-bgSubtle dark:border-darkBgSoft bg-white dark:bg-darkSurface shadow-lg p-5"
    >
      <div class="flex flex-col gap-3">
        <div class="flex items-start justify-between gap-2">
          <div class="flex flex-col gap-0.5">
            <span class="text-xs font-semibold text-forest dark:text-darkAccent">
              Meeting details
            </span>
            <span class="text-[11px] text-textMuted dark:text-darkMuted">
              We use this to keep your notes organized.
            </span>
          </div>
        </div>

        <form id="meeting-form" class="space-y-3">
          <div class="flex flex-col gap-1">
            <label for="meeting-name" class="text-xs font-medium text-textPrimary dark:text-darkText">
              Meeting name
            </label>
            <input
              id="meeting-name"
              type="text"
              class="w-full rounded-xl border border-bgSubtle dark:border-darkBgSoft bg-bgSoft dark:bg-darkBg px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-gold"
              placeholder="Weekly sync, 1:1, planning..."
            />
          </div>

          <div class="flex flex-col gap-1">
            <label for="meeting-topic" class="text-xs font-medium text-textPrimary dark:text-darkText">
              Topic
            </label>
            <input
              id="meeting-topic"
              type="text"
              class="w-full rounded-xl border border-bgSubtle dark:border-darkBgSoft bg-bgSoft dark:bg-darkBg px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-gold"
              placeholder="What is this meeting about?"
            />
          </div>

          <div class="flex flex-col gap-1">
            <label for="meeting-participants" class="text-xs font-medium text-textPrimary dark:text-darkText">
              Participants
            </label>
            <input
              id="meeting-participants"
              type="text"
              class="w-full rounded-xl border border-bgSubtle dark:border-darkBgSoft bg-bgSoft dark:bg-darkBg px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-gold"
              placeholder="Names or roles (for context)"
            />
          </div>

          <!-- Email address for sending notes -->
          <div class="flex flex-col gap-1">
            <label for="meeting-email" class="text-xs font-medium text-textPrimary dark:text-darkText">
              Email address
            </label>
            <input
              id="meeting-email"
              type="email"
              class="w-full rounded-xl border border-bgSubtle dark:border-darkBgSoft bg-bgSoft dark:bg-darkBg px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-gold"
              placeholder="Where should we send your notes?"
            />
            <p class="text-[11px] text-textMuted dark:text-darkMuted">
              We’ll email you the summary and transcript. No newsletters, no spam.
            </p>
          </div>

          <div class="flex items-center justify-between pt-1">
            <button
              type="button"
              id="meeting-cancel"
              class="text-[11px] text-textMuted dark:text-darkMuted hover:text-textPrimary dark:hover:text-darkText"
            >
              Cancel
            </button>

            <button
              type="submit"
              class="inline-flex items-center justify-center px-3 py-1.5 rounded-full bg-forest dark:bg-darkAccent text-white text-xs font-medium hover:bg-emerald-700 dark:hover:bg-darkAccent/90 transition-colors"
            >
              Start recording
            </button>
          </div>
        </form>
      </div>
    </div>
  </template>

  <!-- FILE UPLOAD TEMPLATE -->
  <template id="tmpl-file-upload-section">
    <div
      class="pointer-events-auto max-w-md w-full mx-4 mb-6 rounded-3xl border border-bgSubtle dark:border-darkBgSoft bg-white dark:bg-darkSurface shadow-lg p-5"
    >
      <div class="flex flex-col gap-3">
        <div class="flex flex-col gap-0.5">
          <span class="text-xs font-semibold text-forest dark:text-darkAccent">
            Upload audio file
          </span>
          <span class="text-[11px] text-textMuted dark:text-darkMuted">
            We’ll transcribe and analyse it like a live meeting.
          </span>
        </div>

        <div
          id="upload-dropzone"
          class="mt-2 flex flex-col items-center justify-center gap-2 border border-dashed border-bgSubtle dark:border-darkBgSoft rounded-2xl px-4 py-6 text-center cursor-pointer bg-bgSoft/60 dark:bg-darkBg/60 hover:bg-bgSubtle/60 dark:hover:bg-darkBgSoft/60 transition-colors"
        >
          <span class="text-xs font-medium text-textPrimary dark:text-darkText">
            Drop your file here
          </span>
          <span class="text-[11px] text-textMuted dark:text-darkMuted">
            Or click to choose a file from your device.
          </span>
          <input
            id="audio-file"
            type="file"
            accept="audio/*,video/*"
            class="hidden"
          />
        </div>

        <button
          id="upload-file-btn"
          class="mt-3 inline-flex items-center justify-center px-3 py-1.5 rounded-full bg-forest dark:bg-darkAccent text-white text-xs font-medium hover:bg-emerald-700 dark:hover:bg-darkAccent/90 transition-colors"
        >
          Start processing
        </button>

        <button
          type="button"
          id="upload-cancel"
          class="text-[11px] text-textMuted dark:text-darkMuted hover:text-textPrimary dark:hover:text-darkText self-start mt-1"
        >
          Cancel
        </button>
      </div>
    </div>
  </template>

  <!-- STATUS TEMPLATE -->
  <template id="tmpl-status">
    <div id="status-card" style="opacity:1; transition: opacity 0.6s ease;" class="
      bg-white dark:bg-darkSurface
      border border-bgSubtle dark:border-darkBgSoft
      rounded-3xl shadow-sm
      p-6 mt-6 text-center space-y-3
    ">
      <div class="flex flex-col items-center gap-3">
        <div class="h-8 w-8 rounded-full border-2 border-gold border-t-transparent animate-spin"></div>
        <div id="status-text"
             class="text-forest dark:text-darkAccent text-base font-medium">
          Processing…
        </div>
        <p id="status-subtext"
           class="text-xs text-textMuted dark:text-darkMuted">
          We’re analysing your audio and generating your notes. Check your inbox in a few minutes!
        </p>
      </div>
    </div>
  </template>

  <script type="module" src="src/main.js"></script>
  <!-- Status bubble (appears then fades out) -->
  <div id="status-bubble"
       style="
         position: fixed;
         bottom: 32px;
         left: 50%;
         transform: translateX(-50%);
         background: #1b1b1b;
         padding: 14px 18px;
         border-radius: 12px;
         border: 1px solid #2a2a2a;
         font-size: 14px;
         opacity: 0;
         transition: opacity 0.5s ease;
         pointer-events: none;
         z-index: 9999;
       ">
  </div>
</body>
</html>