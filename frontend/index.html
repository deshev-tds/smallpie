<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>smallpie</title>
  <link rel="stylesheet" href="/src/styles/base.css" />
</head>

<body class="bg-bg text-text dark:bg-darkBg dark:text-darkText">
  <div class="min-h-screen flex flex-col">

    <!-- HEADER -->
    <header class="px-6 py-4 flex items-center justify-center border-b border-border dark:border-darkBorder">
      <div class="flex items-center gap-3">
        <img src="/logo.svg" class="w-8 h-8" alt="smallpie logo" />
        <span class="text-xl font-semibold">smallpie</span>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-1 flex flex-col items-center justify-center pt-10">
      <!-- RECORD BUTTON -->
      <button
        id="start-recording"
        class="w-24 h-24 rounded-full bg-gold text-black flex flex-col items-center justify-center gap-1 shadow-lg transition"
      >
        <span id="record-label" class="text-lg font-bold">REC</span>
        <span id="record-helper" class="text-xs opacity-80">Tap REC to start listening.</span>
        <span id="record-timer" class="hidden text-xs font-mono">00:00</span>
        <span id="record-error" class="hidden text-xs text-red-500">Mic error</span>
      </button>

      <!-- USE FILE BUTTON -->
      <button
        id="use-file"
        class="mt-6 text-sm opacity-70 hover:opacity-100 underline"
      >
        Upload audio file instead
      </button>
    </main>

    <!-- BACKDROP & FLOW -->
    <div id="backdrop" class="fixed inset-0 bg-black bg-opacity-50 hidden"></div>
    <div id="flow-container" class="fixed inset-0 flex items-center justify-center pointer-events-none"></div>

    <!-- TEMPLATES -->
    <!-- FORM -->
    <template id="tmpl-form-section">
      <div class="pointer-events-auto bg-bgSubtle dark:bg-darkBgSoft rounded-xl p-6 w-[320px] shadow-xl">
        <h2 class="text-lg font-bold mb-4">Start a meeting</h2>

        <form id="meeting-form" class="flex flex-col gap-3">
          <input id="meeting-name" placeholder="Meeting name" class="input" />
          <input id="meeting-topic" placeholder="Topic" class="input" />
          <input id="meeting-participants" placeholder="Participants" class="input" />

          <div class="flex justify-between mt-4">
            <button type="button" id="meeting-cancel" class="text-sm underline">Cancel</button>
            <button type="submit" class="bg-gold px-4 py-1 rounded text-black font-semibold">
              Start
            </button>
          </div>
        </form>
      </div>
    </template>

    <!-- UPLOAD -->
    <template id="tmpl-file-upload-section">
      <div class="pointer-events-auto bg-bgSubtle dark:bg-darkBgSoft rounded-xl p-6 w-[320px] shadow-xl">
        <h2 class="text-lg font-bold mb-4">Upload file</h2>

        <div id="upload-dropzone" class="dropzone">Drop or click</div>
        <input type="file" id="audio-file" accept="audio/*" class="hidden" />

        <div class="flex justify-between mt-4">
          <button type="button" id="upload-cancel" class="text-sm underline">Cancel</button>
          <button id="upload-file-btn" class="bg-gold px-4 py-1 rounded text-black font-semibold">
            Upload
          </button>
        </div>
      </div>
    </template>

    <!-- STATUS -->
    <template id="tmpl-status">
      <div
        id="status-card"
        class="pointer-events-auto bg-bgSubtle dark:bg-darkBgSoft rounded-xl p-6 w-[320px] shadow-xl transition-opacity duration-500"
        style="opacity: 1"
      >
        <h2 id="status-text" class="text-lg font-bold">Workingâ€¦</h2>
        <p id="status-subtext" class="text-sm mt-2 opacity-80">
          Please wait.
        </p>

        <!-- NOTE: removed fake REC label here -->
      </div>
    </template>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>